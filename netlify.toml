# Netlify配置文件
[build]
  # 项目发布目录
  publish = "."
  # 没有构建命令，这是一个静态站点
  command = ""

# 缓存配置 - 优化资源加载
[[headers]]
  # 匹配所有图片文件
  for = "/*.png,/*.jpg,/*.jpeg,/*.webp,/*.avif,/img/*/*.jpg"
  [headers.values]
    # 设置长缓存时间（7天）
    Cache-Control = "public, max-age=604800, immutable"

[[headers]]
  # 匹配所有音频文件
  for = "/*.mp3,/*.opus,/mp3/*.*"
  [headers.values]
    # 设置长缓存时间（7天）
    Cache-Control = "public, max-age=604800, immutable"

[[headers]]
  # 匹配静态资源文件
  for = "/*.js,/*.css,/*.json,/*.ico"
  [headers.values]
    # 设置适当的缓存时间，非不可变资源（版本化资源可以更长）
    Cache-Control = "public, max-age=86400"
    # 启用跨域请求
    Access-Control-Allow-Origin = "*"

# 重定向规则
[[redirects]]
  # 重定向到主页
  from = "/"
  to = "/index.html"
  status = 200

[[redirects]]
  # 单页应用路由 - 将所有未匹配的请求重定向到index.html
  from = "/*"
  to = "/index.html"
  status = 200
  # 仅在未找到文件时应用此重定向
  conditions = {\ Query = { path = "!/*" } }

# 启用资产压缩
[build.processing]
  # 启用JavaScript和CSS压缩
  skip_processing = false
  
[build.processing.css]
  # 启用CSS压缩
  bundle = true
  minify = true
  
[build.processing.js]
  # 启用JavaScript压缩
  bundle = true
  minify = true
  
[build.processing.html]
  # 启用HTML压缩
  pretty_urls = true
  
[build.processing.images]
  # 启用图片压缩和优化
  compress = true
  
# 环境变量设置
[context.production]
  # 生产环境特定配置
  
[dev]
  # 本地开发服务器设置
  framework = "static"
  command = ""
  port = 8888
  publish = "."